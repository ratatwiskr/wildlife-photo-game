# ðŸ¦ Wildlife Photo / Wimmelbild Game

**Project goal:**
A tablet-friendly *photo hunt game* for children (2â€“6), now extensible to â€œwimmelbildâ€-style tasks: find animals, planes, or other objects. Supports real photos or illustrations.

Players **pan/drag** or use a stylus to find objects in a scene and tap/click to capture them.

---

## ðŸ—‚ï¸ Project Structure

```
.
â”œâ”€â”€ index.html
â”œâ”€â”€ style.css
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts
â”‚   â”œâ”€â”€ sceneRenderer.ts
â”‚   â”œâ”€â”€ scene.ts
â”‚   â”œâ”€â”€ config.ts
â”‚   â””â”€â”€ input.ts
â”œâ”€â”€ scripts/               # compiled JS output
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ animals/*.svg
â”‚   â”œâ”€â”€ backgrounds/*.svg or .jpg
â”‚   â””â”€â”€ icons/*.svg
â”œâ”€â”€ scenes/
â”‚   â”œâ”€â”€ scene_name.jpg      # full scene
â”‚   â”œâ”€â”€ scene_name_mask.png # color-coded object positions
â”‚   â””â”€â”€ scene_name.json     # scene definition
â”œâ”€â”€ tests/                 # jest / cypress tests
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .github/workflows/
```

---

## âš™ï¸ Scene Naming Conventions

* **Base name** of scene files (jpg, png, json) must match exactly.
* **File suffixes**:

  * `.jpg` â†’ panorama / illustration
  * `_mask.png` â†’ color-coded overlay
  * `.json` â†’ scene definition
* **Example**:

  ```
  jungle_adventure.jpg
  jungle_adventure_mask.png
  jungle_adventure.json
  ```
* **Identifiers** for objects are **unique names**:

  * elephant1, elephant2, lion1
  * Avoid duplicates; any type of object (planes, trees, toysâ€¦) is allowed.
* The validator checks for:

  * Missing masks or JSON
  * Duplicate object identifiers
  * Scene image & mask dimension mismatches

---

## ðŸ“ Scene JSON Structure

```ts
{
  "name": "jungle_adventure",
  "objects": [
    { "id": "elephant1", "tags": ["elephant"], "found": false },
    { "id": "lion1",     "tags": ["lion"],     "found": false }
  ],
  "objectives": [
    { "title": "Find all ðŸ˜", "tags": ["elephant"], "emoji": "ðŸ˜" },
    { "title": "Find all ðŸ¦", "tags": ["lion"],     "emoji": "ðŸ¦" }
  ]
}
```

> **Note:** `id` must be unique. Tags group objects per task. `emoji` is shown for pre-readers.

---

## ðŸŽ® Game Flow

```mermaid
flowchart TD
    A[Start / Scene Selection] --> B[Load Scene Assets: JPG + Mask + JSON]
    B --> C[Initialize Renderer & Input]
    C --> D[Current Objective Display]
    D --> E[User Drag / Camera / Tap]
    E --> F{Color at Tap matches Mask?}
    F -->|Yes| G[Mark object found & draw overlay]
    F -->|No| D
    G --> H{All objects in objective found?}
    H -->|Yes| I[Play Celebration / Flash]
    I --> J{More Objectives?}
    J -->|Yes| D
    J -->|No| K[Show Total Found & Back to Scene Selection]
```

---

## ðŸ› ï¸ Developer Notes

* Modular TS code: `SceneRenderer`, `Scene`, `Input`, `Config`.
* **Mask-based detection**: allows using any image / illustration without hardcoding positions.
* Supports multiple sequential objectives in the same scene.
* Unique object IDs allow grouping and tracking progress.
* Camera / drag mechanics fully abstracted from scene content.

---

## âœ… Scene Validation Workflow

```mermaid
flowchart TD
    A[Add new scene files: jpg + mask + json] --> B[Run local validator or CI]
    B -->|Valid| C[Scene ready for gameplay]
    B -->|Invalid| D[Fix naming, masks, or JSON]
    D --> B
```

**Example GitHub Action:**

```yaml
name: Validate Scenes

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  validate-scenes:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install --include=dev
      - run: npm run validate:scenes
```

* Validator is **read-only**, fails CI if any scene is invalid.
* Can be executed locally:

  ```bash
  npm run validate:scenes
  ```

---

## ðŸ“¦ Developer Quick Start

```bash
npm install
npm run build
npm run serve # or npx http-server .
```

* Open on tablet: `http://<local-ip>:8080`
* CI/CD deploys to GitHub Pages automatically.

### Quick setup for Volta on Ubuntu
```bash
# remove old nodejs/npm
sudo apt remove nodejs npm -y

# install volta
curl https://get.volta.sh | bash
exec $SHELL

# install node (latest LTS)
volta install node

# verify
node -v
npm -v
```

---

## ðŸ’¡ Extending to Wimmelbilder

* Any type of object can be added: planes, toys, soccer balls, etc.
* Tasks are just **objective groups** with tags.
* Mask image color codes track hits.
* Drag-to-find replaces camera if needed.
* Supports multiple sequential objectives in a single scene.
